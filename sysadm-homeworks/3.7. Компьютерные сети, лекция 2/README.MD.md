# Домашнее задание к занятию "3.7. Компьютерные сети, лекция 2"

1.  Проверьте список доступных сетевых интерфейсов на вашем компьютере. Какие команды есть для этого в Linux и в Windows?
Ответ:
```
**vagrant@vagrant**:**~**$ ip a
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host
       valid_lft forever preferred_lft forever
2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether 08:00:27:b1:28:5d brd ff:ff:ff:ff:ff:ff
    inet 10.0.2.15/24 brd 10.0.2.255 scope global dynamic eth0
       valid_lft 59580sec preferred_lft 59580sec
    inet6 fe80::a00:27ff:feb1:285d/64 scope link
       valid_lft forever preferred_lft forever

Для Windows аналогичная команда ipconfig

PS C:\Users\givka> ipconfig
Настройка протокола IP для Windows
Неизвестный адаптер Подключение по локальной сети:            
   Состояние среды. . . . . . . . : Среда передачи недоступна.
   DNS-суффикс подключения . . . . . :
Адаптер Ethernet VirtualBox Host-Only Network:
   DNS-суффикс подключения . . . . . : 
   Локальный IPv6-адрес канала . . . : fe80::250e:1b78:7f64:177c%13
   IPv4-адрес. . . . . . . . . . . . : 192.168.56.1
   Маска подсети . . . . . . . . . . : 255.255.255.0
   Основной шлюз. . . . . . . . . :
Адаптер Ethernet Ethernet:
   DNS-суффикс подключения . . . . . : 
   Локальный IPv6-адрес канала . . . : fe80::11cd:41e0:4925:30de%23
   IPv4-адрес. . . . . . . . . . . . : 192.168.88.19
   Маска подсети . . . . . . . . . . : 255.255.255.0
   Основной шлюз. . . . . . . . . : 192.168.88.1
```


2.  Какой протокол используется для распознавания соседа по сетевому интерфейсу? Какой пакет и команды есть в Linux для этого?
```
Для распознования соседа по сетевому интрефейсу используется протокол LLPD
пакет для Linux называется lldpd

vagrant@vagrant:~$ sudo systemctl enable lldpd && systemctl start lldpd
Synchronizing state of lldpd.service with SysV service script with /lib/systemd/systemd-sysv-install.
Executing: /lib/systemd/systemd-sysv-install enable lldpd
Authentication is required to start 'lldpd.service'.
Authenticating as: vagrant
Password:
==== AUTHENTICATION COMPLETE ===
vagrant@vagrant:~$ lldpctl
-------------------------------------------------------------------------------
LLDP neighbors:
-------------------------------------------------------------------------------
```
3.  Какая технология используется для разделения L2 коммутатора на несколько виртуальных сетей? Какой пакет и команды есть в Linux для этого? Приведите пример конфига.

```
Для разделения L2 коммутатора на несколько виртуальных сетей используется 
технология Vlan. На Linux системах используется пакет vlan.

sudo apt install vlan

vi /etc/network/interfaces
auto vlan250
iface vlan250 inet static
        address 192.168.1.1
        netmask 255.255.255.0
        vlan_raw_device eth0
auto eth0.250
iface eth0.250 inet static
        address 192.168.1.1
        netmask 255.255.255.0
        vlan_raw_device eth0
```
4.  Какие типы агрегации интерфейсов есть в Linux? Какие опции есть для балансировки нагрузки? Приведите пример конфига.

###Типы агрегации интерфейсов в Linux:
- Mode-0(balance-rr) – Данный режим используется по умолчанию. 
- Balance-rr обеспечивается балансировку нагрузки и отказоустойчивость.
В данном режиме сетевые пакеты отправляются “по кругу”, от первого интерфейса к последнему. 
Если выходят из строя интерфейсы, пакеты отправляются на остальные оставшиеся.
Дополнительной настройки коммутатора не требуется при нахождении портов в одном коммутаторе. 
При разностных коммутаторах требуется дополнительная настройка.
- Mode-1(active-backup) – Один из интерфейсов работает в активном режиме, остальные в ожидающем.
При обнаружении проблемы на активном интерфейсе производится переключение на ожидающий интерфейс. 
Не требуется поддержки от коммутатора.
- Mode-2(balance-xor) – Передача пакетов распределяется по типу входящего и исходящего трафика по формуле 
((MAC src) XOR (MAC dest)) % число интерфейсов. Режим дает балансировку нагрузки и отказоустойчивость.
Не требуется дополнительной настройки коммутатора/коммутаторов.
- Mode-3(broadcast) – Происходит передача во все объединенные интерфейсы, тем самым обеспечивая 
отказоустойчивость. Рекомендуется только для использования MULTICAST трафика.
- Mode-4(802.3ad) – динамическое объединение одинаковых портов. В данном режиме можно значительно увеличить 
пропускную способность входящего так и исходящего трафика. Для данного режима необходима поддержка и 
настройка коммутатора/коммутаторов.
- Mode-5(balance-tlb) – Адаптивная балансировки нагрузки трафика. Входящий трафик получается только активным 
интерфейсом, исходящий распределяется в зависимости от текущей загрузки канала каждого интерфейса. 
Не требуется специальной поддержки и настройки коммутатора/коммутаторов.
- Mode-6(balance-alb) – Адаптивная балансировка нагрузки. Отличается более совершенным алгоритмом балансировки 
нагрузки чем Mode-5). Обеспечивается балансировку нагрузки как исходящего так и входящего трафика. 
Не требуется специальной поддержки и настройки коммутатора/коммутаторов.
```
Пример конфигурации :
bonds:
    bond0:
      dhcp4: no
      interfaces: [enp0s3, enp0s4]
      parameters: 
        mode: 802.3ad
        mii-monitor-interval: 1
``` 
5.  Сколько IP адресов в сети с маской /29 ? Сколько /29 подсетей можно получить из сети с маской /24. Приведите несколько примеров /29 подсетей внутри сети 10.10.10.0/24.


```
root@comp:~# ipcalc 10.0.0.0/29
Address:   10.0.0.0             00001010.00000000.00000000.00000 000
Netmask:   255.255.255.248 = 29 11111111.11111111.11111111.11111 000
Wildcard:  0.0.0.7              00000000.00000000.00000000.00000 111
=>
Network:   10.0.0.0/29          00001010.00000000.00000000.00000 000
HostMin:   10.0.0.1             00001010.00000000.00000000.00000 001
HostMax:   10.0.0.6             00001010.00000000.00000000.00000 110
Broadcast: 10.0.0.7             00001010.00000000.00000000.0000
Вопрос 5
root@comp:~# ipcalc 10.0.0.0/29
Address:   10.0.0.0             00001010.00000000.00000000.00000 000
Netmask:   255.255.255.248 = 29 11111111.11111111.11111111.11111 000
Wildcard:  0.0.0.7              00000000.00000000.00000000.00000 111
=>
Network:   10.0.0.0/29          00001010.00000000.00000000.00000 000
HostMin:   10.0.0.1             00001010.00000000.00000000.00000 001
HostMax:   10.0.0.6             00001010.00000000.00000000.00000 110
Broadcast: 10.0.0.7             00001010.00000000.00000000.0000
Hosts/Net: 6                     Class A, Private Internet
Subnets:   32
Hosts:     192
ipcalc 10.0.0.0/24 29
Примеры подсетей 
-----------------

 30.
Network:   10.0.0.232/29        00001010.00000000.00000000.11101 000
HostMin:   10.0.0.233           00001010.00000000.00000000.11101 001
HostMax:   10.0.0.238           00001010.00000000.00000000.11101 110
Broadcast: 10.0.0.239           00001010.00000000.00000000.11101 111
Hosts/Net: 6                     Class A, Private Internet
31.
Network:   10.0.0.240/29        00001010.00000000.00000000.11110 000
HostMin:   10.0.0.241           00001010.00000000.00000000.11110 001
HostMax:   10.0.0.246           00001010.00000000.00000000.11110 110
Broadcast: 10.0.0.247           00001010.00000000.00000000.11110 111
Hosts/Net: 6                     Class A, Private Internet
32.
Network:   10.0.0.248/29        00001010.00000000.00000000.11111 000
HostMin:   10.0.0.249           00001010.00000000.00000000.11111 001
HostMax:   10.0.0.254           00001010.00000000.00000000.11111 110
Broadcast: 10.0.0.255           00001010.00000000.00000000.11111 111
Hosts/Net: 6                     Class A, Private Internet
Hosts/Net: 6                     Class A, Private Internet

Subnets:   32
Hosts:     192

ipcalc 10.0.0.0/24 29



```    
6.  Задача: вас попросили организовать стык между 2-мя организациями. Диапазоны 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16 уже заняты. Из какой подсети допустимо взять частные IP адреса? Маску выберите из расчета максимум 40-50 хостов внутри подсети.
    Вопрос №6
```
root@comp:~# ipcalc 100.64.0.0/26 -s 45
Address:   100.64.0.0           01100100.01000000.00000000.00 000000
Netmask:   255.255.255.192 = 26 11111111.11111111.11111111.11 000000
Wildcard:  0.0.0.63             00000000.00000000.00000000.00 111111
=>
Network:   100.64.0.0/26        01100100.01000000.00000000.00 000000
HostMin:   100.64.0.1           01100100.01000000.00000000.00 000001
HostMax:   100.64.0.62          01100100.01000000.00000000.00 111110
Broadcast: 100.64.0.63          01100100.01000000.00000000.00 111111
Hosts/Net: 62                    Class
```
7.  Как проверить ARP таблицу в Linux, Windows? Как очистить ARP кеш полностью? Как из ARP таблицы удалить только один нужный IP?
    
```
проверить ARP таблицу 
rp –a
очистить ARP кеш полностью 
Arp –d * 
удалить только один нужный IP из ARP таблицы 
Arp –d <IP adress>

```

8*. Установите эмулятор EVE-ng.

Инструкция по установке - [https://github.com/svmyasnikov/eve-ng](https://github.com/svmyasnikov/eve-ng)

Выполните задания на lldp, vlan, bonding в эмуляторе EVE-ng.





